<!-- (_includes/footer/custom.html) -->
<button id="theme-toggle" class="theme-fab" aria-label="Toggle theme" type="button">🌙</button>
<script>
  (function(){
    const KEY='theme';
    const html=document.documentElement;
    const btn=document.getElementById('theme-toggle');
    if(!btn) return;

    function sync(){
      const mode = html.getAttribute('data-theme') || 'light';
      btn.textContent = (mode === 'dark') ? '☀️' : '🌙';
      btn.classList.toggle('is-dark', mode==='dark');
      btn.classList.toggle('is-light', mode==='light');
    }

    btn.addEventListener('click', function(){
      const next = (html.getAttribute('data-theme') === 'dark') ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      localStorage.setItem(KEY, next);
      sync();
    });

    sync();
  })();
</script>
