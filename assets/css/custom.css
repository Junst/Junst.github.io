/* ========= Floating Action Button ========= */
#theme-toggle, .theme-fab {
  position: fixed;
  right: 22px;
  bottom: 22px;
  width: 48px;
  height: 48px;
  border-radius: 9999px;
  border: 1px solid rgba(255,255,255,0.15);
  background: rgba(25,25,25,0.85);
  color: #f0f0f0;
  box-shadow: 0 8px 24px rgba(0,0,0,0.25);
  cursor: pointer;
  z-index: 1000;
  backdrop-filter: blur(6px);
}
#theme-toggle:hover { transform: translateY(-1px); }

/* ========= 기본 설정 ========= */
:root { color-scheme: light dark; }

/* ========= 다크 기본값(저장값 없고 시스템이 다크일 때) ========= */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg: #000;           /* 완전 검정으로 통일 */
    --tx: #e5e5e5;
    --muted: #bdbdbd;
    --line: #222;
    --accent: #8ab4ff;
  }
  :root:not([data-theme]) body { background: var(--bg); color: var(--tx); }
}

/* ========= 수동 다크 모드 (토글 시) ========= */
:root[data-theme="dark"] {
  --bg: #000;             /* 완전 검정으로 통일 */
  --tx: #e5e5e5;
  --muted: #bdbdbd;
  --line: #222;
  --accent: #8ab4ff;
}

/* 배경을 모두 동일하게 맞춤 (헤더/메뉴/사이드바/프로필/본문/푸터) */
:root[data-theme="dark"] body,
:root[data-theme="dark"] .masthead,
:root[data-theme="dark"] .greedy-nav,
:root[data-theme="dark"] .sidebar,
:root[data-theme="dark"] .author__avatar,
:root[data-theme="dark"] .author__content,
:root[data-theme="dark"] .author__urls-wrapper,
:root[data-theme="dark"] .page,
:root[data-theme="dark"] .page__inner-wrap,
:root[data-theme="dark"] .page__content,
:root[data-theme="dark"] .initial-content,
:root[data-theme="dark"] .archive,
:root[data-theme="dark"] .page__footer,
:root[data-theme="dark"] .site-footer {
  background: var(--bg) !important;
  color: var(--tx);
}

/* 헤더/푸터 시각적 일치 – 그림자/그라디언트 제거, 라인만 유지 */
:root[data-theme="dark"] .masthead,
:root[data-theme="dark"] .greedy-nav {
  background-image: none !important;
  box-shadow: none !important;
  border-bottom: 1px solid var(--line);
}
:root[data-theme="dark"] .page__footer,
:root[data-theme="dark"] .site-footer {
  background-image: none !important;
  box-shadow: none !important;
  border-top: 1px solid var(--line);
}

/* 링크/텍스트 컬러 */
:root[data-theme="dark"] a { color: var(--accent); }
:root[data-theme="dark"] .masthead .site-title,
:root[data-theme="dark"] .masthead .site-title a { color: var(--tx) !important; }
:root[data-theme="dark"] .greedy-nav a,
:root[data-theme="dark"] .nav__list .nav__items a { color: var(--muted) !important; }

/* 코드/노티스/테이블 */
:root[data-theme="dark"] code,
:root[data-theme="dark"] pre { background: #0f0f0f; color: #f0f0f0; }
:root[data-theme="dark"] .notice { background: #0d0d0d; border-color: #1f1f1f; color: #ddd; }
:root[data-theme="dark"] table { border-color: var(--line); }
:root[data-theme="dark"] table th,
:root[data-theme="dark"] table td { background: #0a0a0a; border-color: var(--line); color: var(--tx); }

/* 버튼 */
:root[data-theme="dark"] .btn,
:root[data-theme="dark"] .button,
:root[data-theme="dark"] button { background: #141414; border-color: #1f1f1f; color: #eaeaea; }
